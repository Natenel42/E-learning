{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/hp/Documents/ALX/E-learning/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ChatComponent = class ChatComponent {\n  constructor(appService, afs) {\n    this.appService = appService;\n    this.afs = afs;\n    this.groupChat = [];\n    this.collapsed = true;\n  }\n  ngOnInit() {\n    this.loadGroupChat();\n  }\n  loadGroupChat() {\n    this.afs.collection('GroupChats').valueChanges().subscribe(messageDocs => {\n      this.groupChat = messageDocs.sort((a, b) => a.time - b.time);\n    });\n  }\n  sendMessage() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.afs.collection('GroupChats').add({\n        message: _this.newMessage,\n        from: `${_this.appService.currentUser.firstName} ${_this.appService.currentUser.lastName} (${_this.appService.currentUser.role})`,\n        time: Date.now()\n      });\n      _this.newMessage = '';\n    })();\n  }\n};\nChatComponent = __decorate([Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})], ChatComponent);\nexport { ChatComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAS,QAAgB,eAAe;AAS1C,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAKxBC,YAAoBC,UAAsB,EAAUC,GAAqB;IAArD,eAAU,GAAVD,UAAU;IAAsB,QAAG,GAAHC,GAAG;IAHvD,cAAS,GAAU,EAAE;IACrB,cAAS,GAAG,IAAI;EAE4D;EAE5EC,QAAQ;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAA,aAAa;IACX,IAAI,CAACF,GAAG,CACLG,UAAU,CAAC,YAAY,CAAC,CACxBC,YAAY,EAAE,CACdC,SAAS,CAAEC,WAAW,IAAI;MACzB,IAAI,CAACC,SAAS,GAAGD,WAAW,CAACE,IAAI,CAAC,CAACC,CAAM,EAAEC,CAAM,KAAKD,CAAC,CAACE,IAAI,GAAGD,CAAC,CAACC,IAAI,CAAC;IACxE,CAAC,CAAC;EACN;EAEMC,WAAW;IAAA;IAAA;MACf,MAAM,KAAI,CAACZ,GAAG,CAACG,UAAU,CAAC,YAAY,CAAC,CAACU,GAAG,CAAC;QAC1CC,OAAO,EAAE,KAAI,CAACC,UAAU;QACxBC,IAAI,EAAE,GAAG,KAAI,CAACjB,UAAU,CAACkB,WAAW,CAACC,SAAS,IAAI,KAAI,CAACnB,UAAU,CAACkB,WAAW,CAACE,QAAQ,KAAK,KAAI,CAACpB,UAAU,CAACkB,WAAW,CAACG,IAAI,GAAG;QAC9HT,IAAI,EAAEU,IAAI,CAACC,GAAG;OACf,CAAC;MACF,KAAI,CAACP,UAAU,GAAG,EAAE;IAAC;EACvB;CACD;AA5BYlB,aAAa,eALzBD,SAAS,CAAC;EACT2B,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,GACW5B,aAAa,CA4BzB;SA5BYA,aAAa","names":["Component","ChatComponent","constructor","appService","afs","ngOnInit","loadGroupChat","collection","valueChanges","subscribe","messageDocs","groupChat","sort","a","b","time","sendMessage","add","message","newMessage","from","currentUser","firstName","lastName","role","Date","now","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\hp\\Documents\\ALX\\E-learning\\src\\app\\shared\\chat\\chat.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AppService } from 'src/app/services/app.service';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss'],\n})\nexport class ChatComponent implements OnInit {\n  newMessage: any;\n  groupChat: any[] = [];\n  collapsed = true;\n\n  constructor(private appService: AppService, private afs: AngularFirestore) {}\n\n  ngOnInit(): void {\n    this.loadGroupChat();\n  }\n\n  loadGroupChat() {\n    this.afs\n      .collection('GroupChats')\n      .valueChanges()\n      .subscribe((messageDocs) => {\n        this.groupChat = messageDocs.sort((a: any, b: any) => a.time - b.time);\n      });\n  }\n\n  async sendMessage() {\n    await this.afs.collection('GroupChats').add({\n      message: this.newMessage,\n      from: `${this.appService.currentUser.firstName} ${this.appService.currentUser.lastName} (${this.appService.currentUser.role})`,\n      time: Date.now(),\n    });\n    this.newMessage = '';\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}