{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/hp/Documents/ALX/E-learning/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\n// AuthGuard Service\nimport { Injectable } from '@angular/core';\nimport { firstValueFrom } from 'rxjs';\n//import { PreloadService } from './preload_service';\nlet UnloggedinUsersOnlyGuard = class UnloggedinUsersOnlyGuard {\n  constructor(router, appService, afs) {\n    this.router = router;\n    this.appService = appService;\n    this.afs = afs;\n  }\n  canActivate(route, state) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const loggedInUser = yield _this.appService.loggedInUser();\n      if (loggedInUser === undefined || loggedInUser === null) {\n        return true;\n      } else {\n        const user = yield firstValueFrom(_this.afs.doc('Users/' + loggedInUser.uid).get());\n        const data = user.data();\n        _this.router.navigateByUrl(`/${data.role}/home`);\n        return false;\n      }\n    })();\n  }\n};\nUnloggedinUsersOnlyGuard = __decorate([Injectable()], UnloggedinUsersOnlyGuard);\nexport { UnloggedinUsersOnlyGuard };","map":{"version":3,"mappings":";;AAAA;AACA,SAASA,UAAU,QAAQ,eAAe;AAQ1C,SAASC,cAAc,QAAoB,MAAM;AAEjD;AAGO,IAAMC,wBAAwB,GAA9B,MAAMA,wBAAwB;EACnCC,YACUC,MAAc,EACfC,UAAsB,EACrBC,GAAqB;IAFrB,WAAM,GAANF,MAAM;IACP,eAAU,GAAVC,UAAU;IACT,QAAG,GAAHC,GAAG;EACV;EAEGC,WAAW,CACfC,KAA6B,EAC7BC,KAA0B;IAAA;IAAA;MAE1B,MAAMC,YAAY,SAAS,KAAI,CAACL,UAAU,CAACK,YAAY,EAAE;MACzD,IAAIA,YAAY,KAAKC,SAAS,IAAID,YAAY,KAAK,IAAI,EAAE;QACvD,OAAO,IAAI;OACZ,MAAM;QACL,MAAME,IAAI,SAASX,cAAc,CAC/B,KAAI,CAACK,GAAG,CAACO,GAAG,CAAC,QAAQ,GAAGH,YAAY,CAACI,GAAG,CAAC,CAACC,GAAG,EAAE,CAChD;QACD,MAAMC,IAAI,GAAQJ,IAAI,CAACI,IAAI,EAAE;QAC7B,KAAI,CAACZ,MAAM,CAACa,aAAa,CAAC,IAAID,IAAI,CAACE,IAAI,OAAO,CAAC;QAC/C,OAAO,KAAK;;IACb;EACH;CACD;AAvBYhB,wBAAwB,eADpCF,UAAU,EAAE,GACAE,wBAAwB,CAuBpC;SAvBYA,wBAAwB","names":["Injectable","firstValueFrom","UnloggedinUsersOnlyGuard","constructor","router","appService","afs","canActivate","route","state","loggedInUser","undefined","user","doc","uid","get","data","navigateByUrl","role"],"sourceRoot":"","sources":["C:\\Users\\hp\\Documents\\ALX\\E-learning\\src\\app\\route-guards\\UnauthorizedOnly.ts"],"sourcesContent":["// AuthGuard Service\r\nimport { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\r\nimport {\r\n  CanActivate,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  Router,\r\n} from '@angular/router';\r\nimport { firstValueFrom, Observable } from 'rxjs';\r\nimport { AppService } from '../services/app.service';\r\n//import { PreloadService } from './preload_service';\r\n\r\n@Injectable()\r\nexport class UnloggedinUsersOnlyGuard implements CanActivate {\r\n  constructor(\r\n    private router: Router,\r\n    public appService: AppService,\r\n    private afs: AngularFirestore\r\n  ) {}\r\n\r\n  async canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Promise<boolean> {\r\n    const loggedInUser = await this.appService.loggedInUser();\r\n    if (loggedInUser === undefined || loggedInUser === null) {\r\n      return true;\r\n    } else {\r\n      const user = await firstValueFrom(\r\n        this.afs.doc('Users/' + loggedInUser.uid).get()\r\n      );\r\n      const data: any = user.data();\r\n      this.router.navigateByUrl(`/${data.role}/home`);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}